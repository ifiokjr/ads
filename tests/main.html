<!DOCTYPE html>
<html>
  <head>
    <title>Mocha Integration Tests</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.16/require.min.js"></script>
  </head>
  <body>
    <div id='fixtures' style="display: none">
      <p id="orderId">09809</p>
      <p class="orderValue">£569.67</p>
      <p class="orderValue">£569.67</p>
      <p id="dynamicId">Not yet!</p>
      <table>
        <tr>
          <td class="productId">12</td>
          <td class="productValue">$45,07</td>
        </tr>
        <tr>
          <td class="productId">14</td>
          <td class="productValue">$95,00</td>
        </tr>
      </table>
      
      <input type="hidden" value="PRODUCT001" id="pp">
    </div>
    <div id="mocha"></div>
<!--     <script src="../node_modules/mocha/mocha.js"></script> -->
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
<!-- 
    <script src="../node_modules/sinon/pkg/sinon.js"></script>
    <script src="../node_modules/chai/chai.js"></script>
    <script src="../node_modules/chai-jquery/chai-jquery.js"></script>
    <script src="../node_modules/chai-things/lib/chai-things.js"></script>
    <script src="../node_modules/sinon/pkg/sinon.js"></script>
    <script src="../node_modules/sinon-chai/lib/sinon-chai.js"></script> -->
<!--     <script>
      var should = chai.should();
    </script> -->
    <script>
     window.veTagData = {};
     veTagData.settings = {}
     veTagData.settings.gdm = {
          exclude: false,
          ros: true,
          flexId: '5032',
          dbm: {
            src: 'iamsrc',
            cat: {
              ros: 'iam-ros-cat',
              conversion: 'iam-conversion-cat'
            },
            ros: true
          },
          completionId: 10000,
          journeyCode: 'asdfasdf',
          segmentIds: [100, 200, 300],
          orderId: {
              selector: '#orderId',
              mask: '',
              'regex': /[^0-9]/g,
              page: {
                  params: { },
                  urls: [  ]
              }
          },
          productPages: {
              selector: '#pp',
              'default': '000000',
              page: {
                  params: { page: 'product' },
                  urls: [ 'ranger-quiet.codio.io/tests/main.*' ]
              },
              'regex': null
          }, 
          basketPages: {
              selectors: {
                  productId: '.productId', 
                  productPrice: '.productValue'
              },
             'default': '1.00',
              page: {
                  params: { page: 'basket' },
                  urls: [ 'ranger-quiet.codio.io/tests/main.*' ]
              },
              'regex': /[^0-9,\.]/g
          },
          orderValue: {
              selector: '.orderValue',
              'default': '1.00',
               mask: '',
              page: {
                  params: {  },
                  urls: [ 'ranger-quiet.codio.io/tests/main.*' ]
              },
              updates: !!~document.URL.indexOf('updates') ? true : false,
              'regex': /[^0-9,\.]/g
          },
       
       
          completePage: {
              page: {
                  params: { page: 'complete'  },
                  urls: [ 'ranger-quiet.codio.io/tests/*'  ]                  
              },  

              dynamicIdentifier: { 
                  selector: '#dynamicId',
                  criteria: 'contains',
                  value: 'Complete Page'
              }
          }
      }
     
     setTimeout(function() {
       $('#dynamicId').text('This is the Complete Page');
       $('.orderValue').text('$100.00');
     }, 5000);
    </script>
    <script src="../build/gdm.dev-entry.js"></script>
<!--     <script>mocha.setup('bdd')</script> -->
<!--     <script src="integration/tests.js"></script> -->
<!--     <script>
      mocha.run();
    </script> -->
  </body>
</html>